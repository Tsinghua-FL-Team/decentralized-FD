Bootstrap: localimage
From: ./flwr_env.sif

%files
    # Copy source code and respective runners
    ../src/   /opt/run_code/src
    ../run_experiment_slurm.py /opt/run_code/
    ../current_experiments /opt/run_code/current_experiments

%post
    cd /opt/run_code/
    mkdir temp temp/data
    python -m src.datasets.data_loader -d --data_path "temp/data"

%runscript
    cd /opt/run_code
    python run_experiment_slurm.py --num_gpus=-1 --configs_path="current_experiments/"
